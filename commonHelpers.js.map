{"version":3,"file":"commonHelpers.js","sources":["../src/js/message-izi.js","../src/js/paxabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\n\nconst MESSAGES = {\n  info: 'Please enter a value in the search field!',\n  endOfSearch: `We're sorry, but you've reached the end of search results.`,\n  warning:\n    'Sorry, there are no images matching your search query. Please try again!',\n  error:\n    'Sorry, there are no connection to the server. Please try again later! ',\n  exception:\n    'Exception: We have some issue with connection. Please try again later! ',\n};\n\nconst MESSAGES_BG_COLORS = {\n  green: '#59a10d',\n  orange: '#ffa000',\n  red: '#ef4040',\n};\n\nfunction showInfoMessage(message, color) {\n  iziToast.info({\n    position: 'topRight',\n    backgroundColor: `${color}`,\n    message: `${message}`,\n  });\n}\n\nexport { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage };\n","import axios from 'axios';\nimport {\n  MESSAGES,\n  MESSAGES_BG_COLORS,\n  showInfoMessage,\n} from './message-izi.js';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst API_KEY = '45418693-8ae3627eda45814ae2d20cf49';\n\nexport async function getGalleryData(queryValue, page) {\n  const searchParams = {\n    key: API_KEY,\n    q: queryValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n\n  try {\n    const response = await axios.get('', { params: searchParams });\n    return response.data;\n  } catch (err) {\n    if (err.response) {\n      showInfoMessage(MESSAGES.error, MESSAGES_BG_COLORS.orange);\n    } else {\n      showInfoMessage(\n        `${MESSAGES.exception} ERROR:  ${err.message}`,\n        MESSAGES_BG_COLORS.orange\n      );\n    }\n    return null;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(data, tagToInsert, append = false) {\n  const markupString = markup(data);\n  if (append) {\n    tagToInsert.insertAdjacentHTML('beforeend', markupString);\n  } else {\n    tagToInsert.innerHTML = markupString;\n  }\n\n  lightbox.refresh();\n}\n\nfunction markup(data) {\n  return data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li class=\"gallery-item hvr-grow\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <figure class=\"gallery-figure \">\n                        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n                        <figcaption class=\"gallery-figcaption\">\n                            <ul class=\"img-content-wrapper\">\n                                <li>Likes<span>${likes}</span></li>\n                                <li>Views<span>${views}</span></li>\n                                <li>Comments<span>${comments}</span></li>\n                                <li>Downloads<span>${downloads}</span></li>\n                            </ul>\n                        </figcaption>\n                    </figure>\n                </a>\n            </li>\n          `\n    )\n    .join('');\n}\n\nexport function validateGalleryData(galleryData) {\n  if (!galleryData) {\n    gallery.innerHTML = '';\n    return false;\n  } else if (galleryData && galleryData.totalHits === 0) {\n    showInfoMessage(MESSAGES.warning, MESSAGES_BG_COLORS.red);\n    gallery.innerHTML = '';\n    return false;\n  } else {\n    return true;\n  }\n}\n","import iziToast from 'izitoast';\nimport {\n  MESSAGES,\n  MESSAGES_BG_COLORS,\n  showInfoMessage,\n} from './js/message-izi.js';\nimport { getGalleryData } from './js/paxabay-api.js';\nimport { renderGallery, validateGalleryData } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet searchQuery = '';\nlet currentPage = 1;\n\nform.addEventListener('submit', onSubmitForm);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n\n  iziToast.destroy();\n  gallery.innerHTML = '';\n  showLoader();\n\n  const formData = new FormData(event.target);\n  searchQuery = formData.get('search').trim();\n\n  if (!searchQuery) {\n    showInfoMessage(MESSAGES.info, MESSAGES_BG_COLORS.red);\n    hideLoader();\n    return;\n  }\n\n  currentPage = 1;\n  loadMoreBtn.classList.add('is-hidden');\n\n  try {\n    const galleryData = await getGalleryData(searchQuery, currentPage);\n    if (validateGalleryData(galleryData)) {\n      renderGallery(galleryData, gallery);\n\n      if (galleryData.totalHits > 15) {\n        showLoadMoreBtn();\n      } else {\n        hideLoadMoreBtn();\n        showInfoMessage(MESSAGES.endOfSearch, MESSAGES_BG_COLORS.orange);\n      }\n    }\n  } catch (error) {\n    showInfoMessage(MESSAGES.exception + error, MESSAGES_BG_COLORS.orange);\n  } finally {\n    hideLoader();\n    event.target.reset();\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const galleryData = await getGalleryData(searchQuery, currentPage);\n    if (validateGalleryData(galleryData)) {\n      renderGallery(galleryData, gallery, true);\n      smoothScroll();\n    }\n\n    const alreadyLoadedImages = currentPage * 15;\n    if (alreadyLoadedImages >= galleryData.totalHits) {\n      hideLoadMoreBtn();\n      showInfoMessage(MESSAGES.endOfSearch, MESSAGES_BG_COLORS.orange);\n    }\n  } catch (error) {\n    showInfoMessage(MESSAGES.exception + error, MESSAGES_BG_COLORS.orange);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('is-hidden');\n  }\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('is-hidden');\n  }\n}\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n"],"names":["MESSAGES","MESSAGES_BG_COLORS","showInfoMessage","message","color","iziToast","axios","API_KEY","getGalleryData","queryValue","page","searchParams","err","lightbox","SimpleLightbox","renderGallery","data","tagToInsert","append","markupString","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","validateGalleryData","galleryData","form","gallery","loadMoreBtn","searchQuery","currentPage","onSubmitForm","onLoadMore","event","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","error","smoothScroll","cardHeight","loader"],"mappings":"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"}